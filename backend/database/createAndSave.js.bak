import { getConnection } from "../config/db.js";
import { abort } from "node:process";

async function createRecord(lat1, lon1, lat2, lon2, distance, decision) {
  const conn = await getConnection();
  try {
    const result = await conn.execute(
      "INSERT INTO entries (start_lat, start_long, end_lat, end_long, distance_km, decision) VALUES (?, ?, ?, ?, ?, ?)",
      [lat1, lon1, lat2, lon2, distance, decision],
    );
    return console.log(`Record Added to Database: ${result.insertId}`) +
      abort();
  } catch (err) {
    console.error("Error creating record:", err);
  } finally {
    conn.release();
  }
}

const _createRecord = createRecord;
export { _createRecord as createRecord };

